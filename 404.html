<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Redirecting to Spotify...</title>
    <script type="text/javascript">
        (function() {
            // Full path, e.g., /your-repo-name/album/5g7VbiVwXeu8lVdj4tpAZ5
            // Or if your repo is named 'album', it would be /album/5g7VbiVwXeu8lVdj4tpAZ5
            const path = window.location.pathname;

            // Regex to capture the Album ID.
            // It looks for '/album/' followed by 22 alphanumeric characters (standard Spotify ID length)
            // at the end of the path.
            // This works whether your repo is named 'album' or something else.
            // Example path: /album/5g7VbiVwXeu8lVdj4tpAZ5
            // Example path: /my-spotify-redirector/album/5g7VbiVwXeu8lVdj4tpAZ5
            const albumPattern = /\/album\/([a-zA-Z0-9]{22})$/;
            const match = path.match(albumPattern);

            if (match && match[1]) {
                const albumId = match[1];
                const spotifyUrl = `spotify:album:${albumId}`;

                // Provide some feedback to the user before redirecting
                document.write(
                    '<h1>Redirecting...</h1>' +
                    '<p>Attempting to open Spotify for album: <strong>' + albumId + '</strong></p>' +
                    '<p>If you are not redirected automatically, <a href="' + spotifyUrl + '">click here</a>.</p>' +
                    '<p>Target URL: <code>' + spotifyUrl + '</code></p>'
                );

                // Perform the redirect
                window.location.href = spotifyUrl;
            } else {
                // This is a genuine 404 or a path that doesn't match our album pattern.
                // You can customize this message.
                document.write(
                    '<h1>404 - Page Not Found</h1>' +
                    '<p>The page you were looking for was not found.</p>' +
                    '<p>If you were trying to open a Spotify album, the URL should be in the format: <code>.../album/ALBUM_ID</code></p>' +
                    '<p>Current path: <code>' + path + '</code></p>' +
                    '<p><a href="/">Go to homepage</a></p>' // Adjust link if your homepage isn't at the root
                );
                // You could also redirect to your site's homepage:
                // window.location.href = '/your-repo-name/'; // Or just '/' if it's a user/org page
            }
        })();
    </script>
    <noscript>
        <h1>JavaScript Required</h1>
        <p>This page uses JavaScript to redirect you to Spotify. Please enable JavaScript in your browser.</p>
        <p>If you were trying to open a Spotify album, please ensure your URL is in the format: <code>.../album/ALBUM_ID</code></p>
    </noscript>
</head>
<body>
    <!-- Content is generated by JavaScript. If JS is disabled, the noscript tag's content will be more prominent. -->
    <!-- You can put a simple loading message here if you prefer it over document.write -->
    <p>Processing request...</p>
</body>
</html>
